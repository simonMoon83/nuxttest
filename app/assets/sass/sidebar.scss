@use 'sass:color';
@use 'vue-sidebar-menu/src/scss/vue-sidebar-menu.scss' with (
  $primary-color: #6c757d,
  $base-bg: #fff,
  $item-color: #2a2a2e,
  $item-active-color: #2a2a2e,
  $item-active-bg: #f8f9fa,
  $item-hover-bg: #f8f9fa,
  $icon-color: #2a2a2e,
  $icon-bg: transparent,
  $dropdown-bg: #fff,
  $header-item-color: #6c757d,
  $toggle-btn-color: #6c757d,
  $toggle-btn-bg: #fff,
  $item-font-size: 13px,
  $item-line-height: 28px,
  $item-padding: 4px 12px,
  $icon-height: 28px,
  $icon-width: 28px
);

.v-sidebar-menu hr {
  margin-bottom: 8px;
  background-color: #dee2e6;
  border: 0 none;
  height: 0.1rem;
}

// 다크 테마 지원
[data-theme="dark"] .v-sidebar-menu,
.dark .v-sidebar-menu {
  --vsm-primary-color: #fff;
  --vsm-base-bg: #2a2a2e;
  --vsm-item-color: #fff;
  /* 활성/오픈/아이콘 상태를 다크 톤으로 일관되게 */
  --vsm-item-active-color: #fff;
  --vsm-item-active-bg: #3a3a3e;
  --vsm-item-open-color: #fff;
  --vsm-item-open-bg: #3a3a3e;
  --vsm-item-hover-bg: #3a3a3e;
  --vsm-icon-color: #fff;
  --vsm-icon-bg: transparent;
  --vsm-icon-active-color: #fff;
  --vsm-icon-open-color: #fff;
  --vsm-icon-open-bg: transparent;
  --vsm-dropdown-bg: #2a2a2e;
  --vsm-header-item-color: #adb5bd;
  --vsm-toggle-btn-color: #fff;
  --vsm-toggle-btn-bg: #2a2a2e;
  
  hr {
    background-color: #495057;
  }
}

// 하위메뉴 크기 조정
.v-sidebar-menu {
  // 사이드바와 메인 콘텐츠 구분을 위한 오른쪽 경계선
  border-right: 1px solid var(--p-surface-border);
  box-shadow: 2px 0 4px rgba(0, 0, 0, 0.05);

  // 2단계 하위메뉴 (Menu Management, 시스템 설정 등)
  .vsm--link_level-2 {
    line-height: 26px;
    padding: 3px 12px 3px 10px;
    font-size: 12.5px;
  }

  // 하위메뉴 유무와 관계없이 동일한 높이/정렬 적용 (원래 28px 기준)
  .vsm--link,
  .vsm--link_open,
  .vsm--link_active {
    line-height: 28px !important;
    padding-top: 4px !important;
    padding-bottom: 4px !important;
  }
  .vsm--icon,
  .vsm--arrow,
  .vsm--toggle-btn {
    height: 28px !important;
    width: 28px !important;
    line-height: 28px !important;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }
}

// 다크모드: 축소 플라이아웃(오버레이) 드롭다운도 확장 상태와 동일 스타일 강제
[data-theme="dark"] .v-sidebar-menu,
.dark .v-sidebar-menu {
  // 다크 테마에서의 경계선 색상 조정
  border-right-color: #3f3f46;
  box-shadow: 2px 0 4px rgba(0, 0, 0, 0.15);
  // 플라이아웃(드롭다운) 컨테이너 배경/테두리
  .vsm--dropdown,
  .vsm--flyout,
  .vsm--list,
  .vsm--mobile-bg,
  .vsm--scrollbar {
    background: var(--vsm-dropdown-bg) !important;
    color: var(--vsm-item-color) !important;
  }
  // 축소 상태에서의 드롭다운도 동일하게
  &.vsm_collapsed .vsm--dropdown {
    background: var(--vsm-dropdown-bg) !important;
    color: var(--vsm-item-color) !important;
  }
  // 링크/라벨/아이콘 색상
  .vsm--link {
    color: var(--vsm-item-color) !important;
    background: transparent;
  }
  .vsm--link_active,
  .vsm--link_open {
    color: var(--vsm-item-open-color) !important;
    background: var(--vsm-item-open-bg) !important;
  }
  .vsm--link:hover {
    background: var(--vsm-item-hover-bg) !important;
  }
  // 아이콘/라벨은 항상 현재 텍스트 색을 따르도록
  .vsm--icon,
  .vsm--title,
  .vsm--label {
    color: inherit !important;
  }

  // 축소 상태 전반
  &.vsm_collapsed {
    background: var(--vsm-base-bg) !important;
    .vsm--item,
    .vsm--link {
      background: transparent !important;
      color: var(--vsm-item-color) !important;
    }
    .vsm--link:hover {
      background: var(--vsm-item-hover-bg) !important;
    }
  }
}
